---
title: "Comics Report for Training"
author: "Phong Le"
output:
  prettydoc::html_pretty:
    theme: leonids
    highlight: vignette
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_dir = "../reports") })
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)

marvel_powers <- read.csv("../data/Marvel/marvel_powers.csv")
marvel_stats <- read.csv("../data/Marvel/marvel_stats.csv")
marvel_info <- read.csv("../data/Marvel/marvel_info.csv")

```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. The following code can be edited via the git procedure taught in this tutorial. 

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like the examples below. This document will serve as a sandbox to illustrate the processes of Git. 

#### Top 10 Weakest Heroes

```{r}

marvel_stats %>%
  filter(Alignment == "good") %>%
  arrange(Total) %>%
  select(Name) %>%
  head(10)

```

#### Top 10 Weakest Villains

```{r}

marvel_stats %>%
  filter(Alignment == "bad") %>%
  arrange(Total) %>%
  select(Name) %>%
  head(10)

```


#### Comics Character Races

```{r}

library(dplyr)
library(ggplot2)
library(scales)

marvel_info %>%
  group_by(Race) %>%
  summarise(Total = n(), .groups = "drop") %>%
  filter(Total > 7, Race != "-") %>%
  ggplot(aes(
    x = reorder(Race, Total),
    y = Total,
    fill = Total
  )) +
  geom_col(
    width = 0.75,
    color = "black",
    linewidth = 0.3
  ) +
  coord_flip() +
  scale_fill_gradient(
    low = "#fde0dd",
    high = "#c51b8a",
    name = "Count"
  ) +
  scale_y_continuous(
    expand = expansion(mult = c(0, 0.05)),
    labels = comma
  ) +
  labs(
    title = "Marvel Characters by Race",
    subtitle = "Races with More Than 7 Characters",
    x = "Race",
    y = "Number of Characters",
    caption = "Source: Marvel character dataset"
  ) +
  theme_minimal(base_size = 15) +
  theme(
    plot.title = element_text(
      size = 20,
      face = "bold",
      hjust = 0
    ),
    plot.subtitle = element_text(
      size = 14,
      color = "gray30",
      margin = margin(b = 10)
    ),
    axis.title.x = element_text(
      size = 14,
      face = "bold",
      margin = margin(t = 10)
    ),
    axis.title.y = element_text(
      size = 14,
      face = "bold",
      margin = margin(r = 10)
    ),
    axis.text = element_text(size = 12),
    legend.position = "right",
    panel.grid.major.y = element_blank(),
    panel.grid.minor = element_blank(),
    plot.caption = element_text(
      size = 10,
      color = "gray40",
      hjust = 0
    )
  )


```

Updated 12/17/2025
